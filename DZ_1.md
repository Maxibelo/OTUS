
Создаем таблицу persons и заполняем:

> BEGIN;\
> CREATE TABLE persons (id serial, first_name text, second_name text);\
> INSERT INTO persons (first_name, second_name) values ('ivan', 'ivanov');\
> INSERT INTO persons (first_name, second_name) values ('petr', 'petrov');\
> COMMIT;

Cмотрим текущий уровень изоляции:
> show transaction isolation level;

Результат:
 > ![read commited](/DZ_1/1.png)

 Начинаем первую и вторую транзакции:
 > BEGIN; 
 
 Первая транзакция:

 > insert into persons(first_name, second_name) values('sergey', 'sergeev');
 
 Вторая транзакция:

 > SELECT FROM persons;

 Результат:

 > ![](/DZ_1/3.jpg)

 Видим в результате запроса две записи. Третью запись, сделанную в первой транзакции, из второй транзакции не видим. Так как первая транзакция не завершена. Таким образом уровень изоляции (read commited) решает проблему "грязных чтений".

 Первая транзакция:

 > COMMIT;

 Вторая транзакция:

 > SELECT FROM persons;

 Результат:

 > ![](/DZ_1/4.jpg)

 Мы видим новую запись, т.к. изменения внесенные первой транзакцией были сохранены командой COMMIT. Теперь эти изменения видны в других транзакциях.

 Завешаем вторую транзакцию:
 > COMMIT;

 Начинаем первую и вторую транзакции. Меняем уровень изоляции:

 > BEGIN;
 > set transaction isolation level repeatable read; 

 В первой транзакции вносим новую запись в таблицу persons:
 > insert into persons(first_name, second_name) values('sveta', 'svetova');

 Вторая транзакция:

 > SELECT FROM persons;

 Результат:

 > ![](/DZ_1/4.jpg)

 Во второй транзакции изменения сделанные в первой транзакции мы не видим, как и в первом случае. 

 Завершаем первую транзакцию:

 > COMMIT;

 Во второй транзакции повторяем:

 > SELECT FROM persons;

 Результат:

 > ![](/DZ_1/4.jpg)

 Результат не изменился, т.к. при текущем уровне изоляции (repeateble read),\
 мы можем видить только изменения сделанные в своей транзакции. А результаты внесенные другими, даже завершенными транзакциями, нет. Таким образом данный уровень изоляции решает проблему "неповторяющихся чтений".

 Завершаем вторую транзакцию:

 > COMMIT;

 Повторяем запрос:

  > SELECT FROM persons;

  Результат:

 > ![](/DZ_1/5.jpg)

 Теперь мы видим изменения внесенные в первой транзакции.
